window.addEventListener("DOMContentLoaded",function(){const t=document.querySelectorAll("[data-cc-accordion]"),e={};t.forEach(t=>{e[t.id]=new Accordion(t,e)})}),window.addEventListener("load",function(){if(window.location.hash){const t=document.querySelector(location.hash);t&&(t.querySelector("[data-cc-accordion-header]")?t.querySelector("[data-cc-accordion-header]").click():(t.classList.contains("cc-tab-hidden")||t.classList.contains("cc-tab-active"))&&t.click())}});class Accordion{constructor(t,e){this.$el=t,this.$title=this.$el.querySelector("[data-cc-accordion-header]"),this.$content=this.$el.querySelector("[data-cc-accordion-content]"),this.isOpen=this.$el.classList.contains("cc-accordion-active"),this.group=this.$el.getAttribute("data-cc-accordion-group"),this.height=this.$content.scrollHeight,this.all=e,this.$parent=this.$el.parentElement,this.parentLink=parent?this.$parent.getAttribute("data-cc-accordions-group"):"",this.removeVideo=this.removeVideo.bind(this),this.events(),this.ariaLabelling(),this.ariaLabellingOnce()}events(){this.$title.addEventListener("click",this.handleClick.bind(this)),this.$content.addEventListener("transitionend",this.handleTransition.bind(this))}handleClick(){this.height=this.$content.scrollHeight;const t=this.$content.cloneNode(!0),e=document.createElement("div");e.style.overflow="hidden",e.style.visibility="hidden",e.style.width=this.$el.offsetWidth+"px",e.appendChild(t),document.body.appendChild(e);const i=e.scrollHeight;if(document.body.removeChild(e),i&&this.height!==i&&(this.height=i),this.isOpen?(this.close(),this.ariaLabelling()):(this.open(),this.ariaLabelling()),this.parentLink){document.querySelectorAll(`[data-cc-accordions-group=${this.parentLink}]`).forEach(t=>{[...t.children].forEach(t=>{t.id!=this.$el.id&&this.all[t.id].isOpen&&(this.all[t.id].close(),this.all[t.id].ariaLabelling())})}),document.querySelectorAll(`[data-cc-accordion-group=${this.parentLink}]`).forEach(t=>{t.id!=this.$el.id&&this.all[t.id].isOpen&&(this.all[t.id].close(),this.all[t.id].ariaLabelling())})}if(this.group){document.querySelectorAll(`[data-cc-accordions-group=${this.group}]`).forEach(t=>{[...t.children].forEach(t=>{t.id!=this.$el.id&&this.all[t.id].isOpen&&(this.all[t.id].close(),this.all[t.id].ariaLabelling())})}),document.querySelectorAll(`[data-cc-accordion-group=${this.group}]`).forEach(t=>{t.id!=this.$el.id&&this.all[t.id].isOpen&&(this.all[t.id].close(),this.all[t.id].ariaLabelling())})}}ariaLabellingOnce(){this.$title.id&&this.$content.setAttribute("aria-labelledby",this.$title.id)}ariaLabelling(){this.isOpen?(this.$title.setAttribute("aria-expanded",!0),this.$content.removeAttribute("hidden")):(this.$title.setAttribute("aria-expanded",!1),this.$content.setAttribute("hidden",""))}close(){this.isOpen=!1,this.$el.classList.remove("cc-accordion-active"),this.$content.style.maxHeight=`${this.height}px`,setTimeout(()=>{this.$content.style.maxHeight="0px"},1),0===this.$content.querySelectorAll("iframe").length&&0===this.$content.querySelectorAll("video").length||this.$content.addEventListener("transitionend",this.removeVideo)}removeVideo(){this.$content.querySelectorAll('iframe[src*="youtube.com"]').forEach(t=>{t.hasAttribute("srcdoc")||t.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}),this.$content.querySelectorAll('iframe[src*="vimeo.com"]').forEach(t=>{t.hasAttribute("srcdoc")||t.contentWindow.postMessage('{"method":"pause"}',"*")}),this.$content.querySelectorAll("video").forEach(t=>{t.pause()})}open(){this.isOpen=!0,this.$el.classList.add("cc-accordion-active"),this.$el.classList.remove("cc-accordion-hidden"),this.$content.style.maxHeight="0px",setTimeout(()=>{this.$content.style.maxHeight=`${this.height}px`},1)}handleTransition(){if(this.isOpen||this.$el.classList.add("cc-accordion-hidden"),this.$content.style.maxHeight="",this.isOpen){const t=this.$title,e=t.getBoundingClientRect();if(e.top>=0&&e.bottom<=window.innerHeight)return;setTimeout(()=>{t.scrollIntoView({block:"nearest"})},100)}}}