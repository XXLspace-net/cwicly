function queryInfiniteScroll(e,t,a,n,o,i,c,s){if(e){let r=document.querySelector(`#${e} > div`),l="",d="";if(s){let e=window.location.pathname,t="";if(window.location&&window.location.search&&window.location.search.includes("?s=")){t=new URLSearchParams(window.location.search).get("s")}if(window.location.pathname.includes("page")){let a=e.replace(/\/page\/\d{1,}/,"");d=e.match(/\/page\/\d{1,}/)[0].replace("/page/",""),l=`${a}page/{{#}}${t?`?s=${t}`:""}`}else l=`page/{{#}}${t?`?s=${t}`:""}`}else l=`${window.location.pathname}?query-${t}-page={{#}}`;let u=new InfiniteScroll(r,{path:l,append:`#${e} .cc-query-item`,history:n||!1,loadOnScroll:!c,scrollThreshold:a||400,historyTitle:o||!1,status:".page-load-status",checkLastPage:".cc-query-item"});if(d&&(u.pageIndex=parseInt(d)),c){!function t(a){const n=document.querySelector(`#${e} [data-lastpost="${a}"]`);const o=new IntersectionObserver(function(i){i.map(i=>{if(i.isIntersecting){o.unobserve(n),u.loadNextPage(),a+=1;var c=new MutationObserver(function(n){if(document.querySelector(`#${e} [data-lastpost="${a}"]`)){const n=document.querySelector(`#${e} > div`);n&&a<n.dataset.querytotal&&t(a),c.disconnect()}});c.observe(document.body,{childList:!0,subtree:!0})}})});o.observe(n)}(1)}c||u.on("load",function(){i.hasAttribute("data-masoner")&&setTimeout(function(){masonryMaker(i.id)},150)})}}function queryInfiniteButton(e,t,a,n,o,i,c){if(e){let s=document.querySelector(`#${e} > div`);const r=window.location.search;let l,d=r?r.match(/page=(\d+)&/):1,u="";if(c){let e=window.location.pathname,t="";if(window.location&&window.location.search&&window.location.search.includes("?s=")){t=new URLSearchParams(window.location.search).get("s")}if(window.location.pathname.includes("page")){let a=e.replace(/\/page\/\d{1,}/,"");u=e.match(/\/page\/\d{1,}/)[0].replace("/page/",""),l=`${a}page/{{#}}${t?`?s=${t}`:""}`}else l=e.endsWith("/")?`page/{{#}}${t?`?s=${t}`:""}`:`${e}/page/{{#}}${t?`?s=${t}`:""}`}else l=`${window.location.pathname}?query-${t}-page={{#}}`;let h=new InfiniteScroll(s,{path:l,append:`#${e} .cc-query-item`,button:`#${a}`,history:n||!1,loadOnScroll:!1,historyTitle:o||!1,status:".page-load-status",checkLastPage:".cc-query-item"});u&&(h.pageIndex=parseInt(u)),h.on("load",function(){i.hasAttribute("data-masoner")&&setTimeout(function(){masonryMaker(i.id)},150),d+=1,i.dataset.querytotal&&d===parseInt(i.dataset.querytotal)&&h.option({scrollThreshold:1e3,loadOnScroll:!0})})}}window.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll("[data-ccqueryscroll]");e.length&&e.forEach(function(e){queryInfiniteScroll(e.id,e.dataset.query_id,e.dataset.ccinfinitythreshold,e.dataset.ccinfinityhistory,e.dataset.ccinfinityhistorytitle,e.firstElementChild,e.dataset.ccinfinitedirection,e.dataset.ccinherit)});const t=document.querySelectorAll("[data-ccquerybutton]");t.length&&t.forEach(function(e){queryInfiniteButton(e.id,e.dataset.queryid,e.dataset.ccquerybutton,e.dataset.ccinfinityhistory,e.dataset.ccinfinityhistorytitle,e.firstElementChild,e.dataset.ccinherit)})});